<%= turbo_stream_from current_group, "properties" %>

<main class="container mb-xxxxl">
  <%= link_to sanitize("&larr; Back to properties"), properties_path %>

  <div class="header">
    <h1>
      <%= @property.name %>
    </h1>

    <%= link_to "New space",
                new_property_space_path(@property),
                data: { turbo_frame: dom_id(Space.new) },
                class: "btn btn--primary" %>
  </div>

  <%= turbo_frame_tag Space.new %>
  <%= turbo_frame_tag "spaces" do %>
    <%= render "spaces/empty_state" %>
    <%= render @spaces, property: @property %>
  <% end %>
    
    <%= link_to "New appliance",
                new_property_appliance_path(@property),
                data: { turbo_frame: dom_id(Appliance.new) },
                class: "btn btn--primary" %>

  <%= turbo_frame_tag Appliance.new %>
  <%= turbo_frame_tag "appliances" do %>
    <%= render "appliances/empty_state" %>
    <%= render @appliances, property: @property %>
  <% end %>
</main>

<%= turbo_frame_tag dom_id(@property, :total) do %>
    <%= render "properties/total", property: @property %>
<% end %>
